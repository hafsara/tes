<div class="card flex justify-content-center">
    <p-stepper>
        <p-stepperPanel header="Form Configuration">
            <ng-template pTemplate="content" let-nextCallback="nextCallback" let-index="index">
                <div class="flex flex-column h-12rem">
                    <div class="form-container border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium">
                        <div class="centered-container">
                            <p-floatLabel>
                                <input pInputText id="title" [(ngModel)]="form.title"/>
                                <label for="title">Form Title</label>
                            </p-floatLabel>
                        </div>

                        <div class="centered-container">
                            <p-floatLabel>
                                <textarea
                                        rows="5"
                                        cols="30"
                                        pInputTextarea
                                        [autoResize]="true" id="desc" [(ngModel)]="form.description">
                                </textarea>
                                <label for="desc">Description</label>
                            </p-floatLabel>
                        </div>

                        <div class="centered-container">
                            <p-floatLabel>
                                <input pInputText id="userMail" [(ngModel)]="form.userEmail"/>
                                <label for="userMail">User Email</label>
                            </p-floatLabel>
                        </div>

                        <div class="centered-container">
                            <p-toggleButton
                                    [(ngModel)]="form.escalate"
                                    onLabel="Escalate On"
                                    offLabel="Escalate Off"/>
                        </div>
                        <div *ngIf="form.escalate" class="centered-container">
                            <p-floatLabel>
                                <input pInputText id="managerMail" [(ngModel)]="form.managerEmail"/>
                                <label for="managerMail">User Email</label>
                            </p-floatLabel>
                        </div>
                    </div>
                    <div class="flex pt-4 justify-content-end">
                        <p-button
                                label="Next"
                                icon="pi pi-arrow-right"
                                iconPos="right"
                                (onClick)="nextCallback.emit()"/>
                    </div>
                </div>
            </ng-template>
        </p-stepperPanel>
        <p-stepperPanel header="Add Fields">
            <ng-template pTemplate="content" let-prevCallback="prevCallback" let-nextCallback="nextCallback"
                         let-index="index">
                <div class="flex flex-column h-12rem">
                    <div class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium">
                        <div *ngFor="let question of form.questions; let i = index" class="question-container">
                            <div class="full-width-input">
                                <p-floatLabel>
                                    <input pInputText [(ngModel)]="question.text" required/>
                                    <label>Question sans titre</label>
                                </p-floatLabel>
                            </div>

                            <div class="full-width-input">
                                <p-dropdown [(ngModel)]="question.type" placeholder="Type de question"
                                            [options]="questionTypes">
                                </p-dropdown>
                            </div>

                            <button pButton type="button" icon="pi pi-plus" class="p-button-rounded p-button-primary"
                                    *ngIf="question.type !== 'text'" (click)="addOption(i)">
                            </button>

                            <div *ngIf="['multipleChoice', 'checkbox', 'dropdown'].includes(question.type)">
                                <div *ngFor="let option of question.options; let j = index" class="option-container">
                                    <div class="option-field">
                                        <p-floatLabel>
                                            <input pInputText [(ngModel)]="question.options[j]" required/>
                                            <label>Option</label>
                                        </p-floatLabel>
                                    </div>
                                    <button pButton type="button" icon="pi pi-trash"
                                            class="p-button-rounded p-button-danger" (click)="removeOption(i, j)">
                                    </button>
                                </div>
                            </div>

                            <div class="sidebar">
                                <button pButton type="button" icon="pi pi-plus"
                                        class="p-button-rounded p-button-primary" (click)="addQuestion()"
                                        title="Ajouter une question">
                                </button>
                                <button pButton type="button" icon="pi pi-trash"
                                        class="p-button-rounded p-button-danger" (click)="removeQuestion(i)"
                                        title="Supprimer la question">
                                </button>
                                <button pButton type="button" icon="pi pi-copy"
                                        class="p-button-rounded p-button-secondary" (click)="duplicateQuestion(i)"
                                        title="Dupliquer la question">
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="flex pt-4 justify-content-between">
                        <p-button
                                label="Back"
                                icon="pi pi-arrow-left"
                                (onClick)="prevCallback.emit()"/>
                        <p-button
                                label="Next"
                                icon="pi pi-arrow-right"
                                iconPos="right"
                                (onClick)="nextCallback.emit()"/>
                    </div>
                </div>
            </ng-template>
        </p-stepperPanel>
        <p-stepperPanel header="Submit">
            <ng-template pTemplate="content" let-prevCallback="prevCallback" let-index="index">
                <div class="flex flex-column h-12rem">
                    <div class="border-2 border-dashed surface-border border-round surface-ground flex-auto flex justify-content-center align-items-center font-medium">
                        Content III
                    </div>
                </div>
                <div class="flex pt-4 justify-content-start">
                    <p-button
                            label="Back"
                            icon="pi pi-arrow-left"
                            (onClick)="prevCallback.emit()"/>
                </div>
            </ng-template>
        </p-stepperPanel>
    </p-stepper>
</div>

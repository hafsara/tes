<div class="card flex justify-content-center">
  <!-- Stepper Header -->
  <p-steps [model]="steps" [(activeIndex)]="currentStep" [readonly]="true"></p-steps>

  <!-- Step Content -->
  <div *ngIf="currentStep === 0">
    <!-- Step 1: Configuration -->
    <div class="p-field p-grid section-spacing">
      <p-floatLabel>
        <input pInputText id="title" [(ngModel)]="form.title" required />
        <label for="title">Form title</label>
        <small *ngIf="showErrors && form.title.trim() === ''" class="p-error">Ce champ est obligatoire</small>
      </p-floatLabel>
    </div>

    <div class="p-field p-grid section-spacing">
      <p-floatLabel>
        <textarea rows="5" cols="30" id="description" pInputTextarea [(ngModel)]="form.description" [autoResize]="true" required>
        </textarea>
        <label for="description">Description</label>
        <small *ngIf="showErrors && form.description.trim() === ''" class="p-error">Ce champ est obligatoire</small>
      </p-floatLabel>
    </div>

    <div class="p-field p-grid section-spacing">
      <p-floatLabel>
        <input pInputText id="userEmail" [(ngModel)]="form.userEmail" required />
        <label for="userEmail">User Email</label>
        <small *ngIf="showErrors && !emailPattern.test(form.userEmail)" class="p-error">Email invalide</small>
      </p-floatLabel>
    </div>

    <div class="p-field p-grid section-spacing">
      <p-toggleButton [(ngModel)]="form.escalation" onLabel="Escalade On" offLabel="Escalade Off" />
    </div>

    <div class="card p-fluid" *ngIf="form.escalation">
      <p-floatLabel>
        <p-chips id="managerEmail" [(ngModel)]="form.managerEmail" required [max]="3" />
        <label for="managerEmail">Manager Email</label>
      </p-floatLabel>
      <small *ngIf="showErrors && (!form.managerEmail || !emailPattern.test(form.managerEmail))" class="p-error">Email invalide</small>
    </div>

    <div class="flex pt-4 justify-content-end">
      <p-button label="Next" icon="pi pi-arrow-right" iconPos="right" (onClick)="nextStep()"></p-button>
    </div>
  </div>

  <div *ngIf="currentStep === 1">
    <!-- Step 2: Création du Formulaire -->
    <p>Contenu de l'étape 2 (Création du Formulaire)</p>
    <div class="flex pt-4 justify-content-between">
      <p-button label="Back" icon="pi pi-arrow-left" (onClick)="previousStep()"></p-button>
      <p-button label="Next" icon="pi pi-arrow-right" iconPos="right" (onClick)="nextStep()"></p-button>
    </div>
  </div>

  <div *ngIf="currentStep === 2">
    <!-- Step 3: Récapitulatif -->
    <p>Contenu de l'étape 3 (Récapitulatif)</p>
    <div class="flex pt-4 justify-content-start">
      <p-button label="Back" icon="pi pi-arrow-left" (onClick)="previousStep()"></p-button>
    </div>
  </div>
</div>
